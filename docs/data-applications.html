<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 Applications: Data | Montana State Introductory Statistics with R</title>
<meta name="author" content="Nicole Carnegie, Stacey Hancock, Elijah Meyer, Jade Schmidt, Melinda Yager">
<meta name="description" content="The Preliminaries Chapter introduced the RStudio statistical computing environment. In this chapter, we will explore tidy data in R—how to import and export data sets, filter the data set into...">
<meta name="generator" content="bookdown 0.27 with bs4_book()">
<meta property="og:title" content="Chapter 3 Applications: Data | Montana State Introductory Statistics with R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://mtstateintrostats.github.io/IntroStatTextbook/data-applications.html">
<meta property="og:description" content="The Preliminaries Chapter introduced the RStudio statistical computing environment. In this chapter, we will explore tidy data in R—how to import and export data sets, filter the data set into...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 3 Applications: Data | Montana State Introductory Statistics with R">
<meta name="twitter:description" content="The Preliminaries Chapter introduced the RStudio statistical computing environment. In this chapter, we will explore tidy data in R—how to import and export data sets, filter the data set into...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet">
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><script type="text/x-mathjax-config">
    const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
    for (let popover of popovers){
      const div = document.createElement('div');
      div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
      div.innerHTML = popover.getAttribute('data-content');
      
      // Will this work with TeX on its own line?
      var has_math = div.querySelector("span.math");
      if (has_math) {
        document.body.appendChild(div);
      	MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
      	MathJax.Hub.Queue(function(){
          popover.setAttribute('data-content', div.innerHTML);
      	})
      }
    }
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="css/ims-style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Montana State Introductory Statistics with R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="authors.html">Authors</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="rstudio.html">Preliminaries: Getting started in RStudio</a></li>
<li class="book-part">Introduction to data</li>
<li><a class="" href="data-hello.html"><span class="header-section-number">1</span> Hello data</a></li>
<li><a class="" href="data-design.html"><span class="header-section-number">2</span> Study design</a></li>
<li><a class="active" href="data-applications.html"><span class="header-section-number">3</span> Applications: Data</a></li>
<li class="book-part">Exploratory data analysis</li>
<li><a class="" href="explore-categorical.html"><span class="header-section-number">4</span> Exploring categorical data</a></li>
<li><a class="" href="explore-numerical.html"><span class="header-section-number">5</span> Exploring quantitative data</a></li>
<li><a class="" href="explore-regression.html"><span class="header-section-number">6</span> Correlation and regression</a></li>
<li><a class="" href="explore-mult-reg.html"><span class="header-section-number">7</span> Multivariable models</a></li>
<li><a class="" href="explore-applications.html"><span class="header-section-number">8</span> Applications: Explore</a></li>
<li class="book-part">Foundations of inference</li>
<li><a class="" href="foundations-randomization.html"><span class="header-section-number">9</span> Hypothesis testing with randomization</a></li>
<li><a class="" href="foundations-bootstrapping.html"><span class="header-section-number">10</span> Confidence intervals with bootstrapping</a></li>
<li><a class="" href="foundations-mathematical.html"><span class="header-section-number">11</span> Inference with mathematical models</a></li>
<li><a class="" href="foundations-errors.html"><span class="header-section-number">12</span> Errors, power, and practical importance</a></li>
<li><a class="" href="foundations-applications.html"><span class="header-section-number">13</span> Applications: Foundations</a></li>
<li class="book-part">Inference for categorical data</li>
<li><a class="" href="inference-one-prop.html"><span class="header-section-number">14</span> Inference for a single proportion</a></li>
<li><a class="" href="inference-two-props.html"><span class="header-section-number">15</span> Inference for comparing two proportions</a></li>
<li><a class="" href="inference-categ-applications.html"><span class="header-section-number">16</span> Applications: Infer categorical</a></li>
<li class="book-part">Inference for quantitative data</li>
<li><a class="" href="inference-one-mean.html"><span class="header-section-number">17</span> Inference for a single mean</a></li>
<li><a class="" href="inference-paired-means.html"><span class="header-section-number">18</span> Inference for comparing paired means</a></li>
<li><a class="" href="inference-two-means.html"><span class="header-section-number">19</span> Inference for comparing two independent means</a></li>
<li><a class="" href="inference-num-applications.html"><span class="header-section-number">20</span> Applications: Infer quantitative</a></li>
<li class="book-part">Inference for regression</li>
<li><a class="" href="inference-reg.html"><span class="header-section-number">21</span> Inference for correlation and slope</a></li>
<li><a class="" href="inference-reg-applications.html"><span class="header-section-number">22</span> Applications: Infer regression</a></li>
<li class="book-part">Probability</li>
<li><a class="" href="probability.html"><span class="header-section-number">23</span> Probability with tables</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/MTstateIntroStats/IntroStatTextbook">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-applications" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Applications: Data<a class="anchor" aria-label="anchor" href="#data-applications"><i class="fas fa-link"></i></a>
</h1>
<div class="chapterintro">
<p>The <a href="rstudio">Preliminaries</a> Chapter introduced the RStudio statistical computing environment.
In this chapter, we will explore tidy data in R—how to import and export data sets,
filter the data set into groups, and select or create new variables.
We encourage you to work through the code in this chapter in
your own RStudio session.</p>
</div>
<!-- ## Data in R {#data-in-r} -->
<p>R is a powerful and open source software tool for working with data.
We use the R programming environment within the RStudio integrated
development environment (IDE), which offers a suite of additional features
in addition to the R programming console.
Throughout this text, we provide some guidance on how to use R within the
context of the statistical content that is being covered in each of the
“Applications” chapters at the end of each part.</p>
<p>As educators, we see the value of teaching with modern software to
empower students to take optimal advantage of the concepts they are learning.
Generally, we will present the R techniques in the “Applications” chapter at the
end of each part. There are times in the text when the concepts are not
distinguishable from the software, and in those cases, we have have provided the
R code within the main body of the chapter.</p>
<p>We start with an introduction to R, focused on how data sets are structured in
R and how the user can work with a data object in R.</p>
<div id="dataframes-in-r" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Dataframes in R<a class="anchor" aria-label="anchor" href="#dataframes-in-r"><i class="fas fa-link"></i></a>
</h2>
<p>Throughout the text, we will work with many different data sets. Some data sets
are pre-loaded into R, some get loaded through R packages, and some data sets
will be created by the student. Data sets can be viewed through the RStudio
environment, and can also be investigated through various R <strong>functions</strong>.</p>
<div class="onebox">
<p>Similar to the notation for a mathematical function, an R <strong>function</strong> takes the form:</p>
<blockquote>
<p><code>function_name(arguments to the function)</code></p>
</blockquote>
<p>The <code>function_name</code> is the name of the function, such as <code>mean</code>, <code>read.csv</code>, or <code>lm</code>.
You can access the help file for any named function by preceding it with a question mark: <code><a href="https://rdrr.io/r/utils/read.table.html">?read.csv</a></code>.</p>
<p>The arguments to the function are the inputs to the function. These can be data sets, parameter values, or other options.</p>
</div>
<p>In R, all functions take arguments in round parentheses (as opposed to
subsetting observations or variables from data objects which happen
with square parentheses).</p>
<div class="workedexample">
<p>In the R console, type <code><a href="https://rdrr.io/r/utils/read.table.html">?read.csv</a></code>. This will bring up the help file for the <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> function. What does this function do? What are the first two arguments to this function?</p>
<hr>
<p>According to the “Description” section of the help file, the <code>read.csv</code> function
reads a data file and creates a data frame object in R, with cases corresponding
to lines and variables to fields in the file. The <code>read.csv</code> function in particular
is designed to read in <code>.csv</code> (comma separated value) data files.</p>
<p>The first argument is the <code>file</code> — the name of the file or website which the data are to be read from. The second argument is <code>header</code> — a <strong>logical</strong> argument (<code>TRUE</code> or <code>FALSE</code>) for whether the file contains a header row of variables or not.
The default for the function is <code>header = TRUE</code>, so if this argument isn’t used,
R will assume the .csv file has a header row.</p>
</div>
<p>Let’s start by exploring a data set containing information on 50 emails
sent to David Diez’s Gmail account (one of the authors of the <em>OpenIntro</em>
textbooks). The data set, , is built into the <code>openintro</code>
package in R and is comprised of a subset of emails from the larger <code>email</code>
data set that we’ll see in Chapter <a href="explore-categorical.html#explore-categorical">4</a>.
Data sets that are built into R packages can be loaded using the <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code> function.</p>
<div class="data">
<p>The <code>email50</code> data can be found in the <a href="http://openintrostat.github.io/openintro/reference/index.html">openintro</a> package.</p>
</div>
<p>We can use the <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code> function to see the variables included in the data set
and their data type. Or, we could use the <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> function to see the first
few rows of the data set.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">email50</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">email50</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 50</span></span>
<span><span class="co">#&gt; Columns: 21</span></span>
<span><span class="co">#&gt; $ spam         &lt;fct&gt; 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, …</span></span>
<span><span class="co">#&gt; $ to_multiple  &lt;fct&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ from         &lt;fct&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …</span></span>
<span><span class="co">#&gt; $ cc           &lt;int&gt; 0, 0, 4, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, …</span></span>
<span><span class="co">#&gt; $ sent_email   &lt;fct&gt; 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, …</span></span>
<span><span class="co">#&gt; $ time         &lt;dttm&gt; 2012-01-04 06:19:16, 2012-02-16 13:10:06, 2012-01-04 08:…</span></span>
<span><span class="co">#&gt; $ image        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ attach       &lt;dbl&gt; 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 1, 0, …</span></span>
<span><span class="co">#&gt; $ dollar       &lt;dbl&gt; 0, 0, 0, 0, 9, 0, 0, 0, 0, 23, 4, 0, 3, 2, 0, 0, 0, 0, 0,…</span></span>
<span><span class="co">#&gt; $ winner       &lt;fct&gt; no, no, no, no, no, no, no, no, no, no, no, no, yes, no, …</span></span>
<span><span class="co">#&gt; $ inherit      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ viagra       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ password     &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 8, …</span></span>
<span><span class="co">#&gt; $ num_char     &lt;dbl&gt; 21.705, 7.011, 0.631, 2.454, 41.623, 0.057, 0.809, 5.229,…</span></span>
<span><span class="co">#&gt; $ line_breaks  &lt;int&gt; 551, 183, 28, 61, 1088, 5, 17, 88, 242, 578, 1167, 198, 7…</span></span>
<span><span class="co">#&gt; $ format       &lt;fct&gt; 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, …</span></span>
<span><span class="co">#&gt; $ re_subj      &lt;fct&gt; 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, …</span></span>
<span><span class="co">#&gt; $ exclaim_subj &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ urgent_subj  &lt;fct&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ exclaim_mess &lt;dbl&gt; 8, 1, 2, 1, 43, 0, 0, 2, 22, 3, 13, 1, 2, 2, 21, 10, 0, 0…</span></span>
<span><span class="co">#&gt; $ number       &lt;fct&gt; small, big, none, small, small, small, small, small, smal…</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">email50</span><span class="op">)</span> </span>
<span><span class="co">#&gt; # A tibble: 6 × 21</span></span>
<span><span class="co">#&gt;   spam  to_multiple from     cc sent_e…¹ time                image attach dollar</span></span>
<span><span class="co">#&gt;   &lt;fct&gt; &lt;fct&gt;       &lt;fct&gt; &lt;int&gt; &lt;fct&gt;    &lt;dttm&gt;              &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 0     0           1         0 1        2012-01-04 06:19:16     0      0      0</span></span>
<span><span class="co">#&gt; 2 0     0           1         0 0        2012-02-16 13:10:06     0      0      0</span></span>
<span><span class="co">#&gt; 3 1     0           1         4 0        2012-01-04 08:36:23     0      2      0</span></span>
<span><span class="co">#&gt; 4 0     0           1         0 0        2012-01-04 10:49:52     0      0      0</span></span>
<span><span class="co">#&gt; 5 0     0           1         0 0        2012-01-27 02:34:45     0      0      9</span></span>
<span><span class="co">#&gt; 6 0     0           1         0 0        2012-01-17 10:31:57     0      0      0</span></span>
<span><span class="co">#&gt; # … with 12 more variables: winner &lt;fct&gt;, inherit &lt;dbl&gt;, viagra &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   password &lt;dbl&gt;, num_char &lt;dbl&gt;, line_breaks &lt;int&gt;, format &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   re_subj &lt;fct&gt;, exclaim_subj &lt;dbl&gt;, urgent_subj &lt;fct&gt;, exclaim_mess &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   number &lt;fct&gt;, and abbreviated variable name ¹​sent_email</span></span>
<span><span class="co">#&gt; # ℹ Use `colnames()` to see all variable names</span></span></code></pre></div>
<p>Sometimes it is necessary to extract a column or a row from a data set.
In R, the <code>$</code> operator can be used to extract a column from a data set.
For example, <code>data$variable</code> would extract the <code>variable</code> column from the <code>data</code> dataframe.
When extracted, these columns can be thought of as vectors. With these vectors, if you desired to pull off a specific entry, you could use square brackets (<code>[ ]</code>), with the index (number) of the entry you wish to extract in the brackets.
For example, <code>data$variable[2]</code> would extract the second entry (row) of the <code>variable</code> column.</p>
<p>Because a dataframe can be (roughly) thought of as a set of many different vectors, you can extract rows and columns from a dataframe using matrix notation (e.g. <code>[row, column]</code>).
For example <code>data[i,j]</code> will extract the entry in row <span class="math inline">\(i\)</span> and column <span class="math inline">\(j\)</span>;
<code>data[i, ]</code> will extract the <span class="math inline">\(i^{th}\)</span> row, and <code>data[ , j]</code> will extract the <span class="math inline">\(j^{th}\)</span> column.
Notice, when extracting an entire row (or column), you do not need to specify the columns (or rows) you would like, which is why the second entry does not contain a number.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">email50</span><span class="op">$</span><span class="va">num_char</span> <span class="co"># The num_char variable column</span></span>
<span><span class="co">#&gt;  [1] 21.705  7.011  0.631  2.454 41.623  0.057  0.809  5.229  9.277 17.170</span></span>
<span><span class="co">#&gt; [11] 64.401 10.368 42.793  0.451 29.233  9.794  2.139  0.130  4.945 11.533</span></span>
<span><span class="co">#&gt; [21]  5.682  6.768  0.086  3.070 26.520 26.255  5.259  2.780  5.864  9.928</span></span>
<span><span class="co">#&gt; [31] 25.209  6.563 24.599 25.757  0.409 11.223  3.778  1.493 10.613  0.493</span></span>
<span><span class="co">#&gt; [41]  4.415 14.156  9.491 24.837  0.684 13.502  2.789  1.169  8.937 15.829</span></span>
<span><span class="va">email50</span><span class="op">[</span><span class="fl">47</span>,<span class="fl">3</span><span class="op">]</span> <span class="co"># The entry in the 47th row and 3rd column</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span><span class="co">#&gt;   from </span></span>
<span><span class="co">#&gt;   &lt;fct&gt;</span></span>
<span><span class="co">#&gt; 1 1</span></span>
<span><span class="va">email50</span><span class="op">[</span><span class="fl">47</span>,<span class="op">]</span> <span class="co"># The 47th row</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 21</span></span>
<span><span class="co">#&gt;   spam  to_multiple from     cc sent_e…¹ time                image attach dollar</span></span>
<span><span class="co">#&gt;   &lt;fct&gt; &lt;fct&gt;       &lt;fct&gt; &lt;int&gt; &lt;fct&gt;    &lt;dttm&gt;              &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 0     1           1         0 0        2012-03-06 07:10:00     0      0      0</span></span>
<span><span class="co">#&gt; # … with 12 more variables: winner &lt;fct&gt;, inherit &lt;dbl&gt;, viagra &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   password &lt;dbl&gt;, num_char &lt;dbl&gt;, line_breaks &lt;int&gt;, format &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   re_subj &lt;fct&gt;, exclaim_subj &lt;dbl&gt;, urgent_subj &lt;fct&gt;, exclaim_mess &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   number &lt;fct&gt;, and abbreviated variable name ¹​sent_email</span></span>
<span><span class="co">#&gt; # ℹ Use `colnames()` to see all variable names</span></span></code></pre></div>
</div>
<div id="datastruc" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Tidy structure of data<a class="anchor" aria-label="anchor" href="#datastruc"><i class="fas fa-link"></i></a>
</h2>
<p>For plotting, analyses, model building, etc., the data should be structured according to certain principles.<br>
Hadley Wickham provides a thorough discussion and advice for cleaning up the data in <span class="citation">Wickham (<a href="references.html#ref-wickham2014" role="doc-biblioref">2014</a>)</span>.</p>
<div class="onebox">
<p><strong>Tidy data.</strong></p>
<p>A data set in which the rows are the observational units and the columns are the variables.<br>
The key is that <em>every</em> row is a case and <em>every</em> column is a variable.<br>
No exceptions.</p>
</div>
<p>Creating tidy data is often not trivial! However, data sets provided in this course will always be provided in the tidy data form.</p>
</div>
<div id="using-the-pipe-to-chain" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Using the pipe to chain<a class="anchor" aria-label="anchor" href="#using-the-pipe-to-chain"><i class="fas fa-link"></i></a>
</h2>
<p>Within R (really within any type of computing language, Python, SQL, Java, etc.), it is important to understand how to build data using the patterns of the language.</p>
<p>In R, the syntax <code>&lt;-</code> is called the <strong>assignment</strong> character; it is used to store the output of some function or set of operations in what we call an <strong>object</strong>. Some things to consider:</p>
<ul>
<li>
<code>object_name &lt;- anything</code> is a way of <em>assigning</em> <code>anything</code> to the new <code>object_name</code>.</li>
<li>
<code>object_name &lt;- function_name(data_table, arguments)</code> is a way of using a function to create a new object.</li>
<li>
<code>object_name &lt;- data_table %&gt;% function_name(arguments)</code> uses <em>chaining syntax</em> called the <strong>pipe operator</strong> (<code>%&gt;%</code>) as an extension of the ideas of functions.</li>
</ul>
<p>The pipe syntax (<code>%&gt;%</code>) takes a data frame (or data table) and sends it to the argument of a function. The mapping goes to the first available argument in the function.<br>
For example:</p>
<p><code>x %&gt;% f(y)</code> is the same as <code>f(x, y)</code></p>
<p><code>y %&gt;% f(x, ., z)</code> is the same as <code>f(x,y,z)</code></p>
<p>In chaining, the value on the left side of <code>%&gt;%</code> becomes the <em>first argument</em> to the function on the right side. This can be extended to multiple lines of code:</p>
<pre><code>object_name &lt;- data_table %&gt;%
                    function_name(arguments) %&gt;% 
                    another_function_name(other_arguments)</code></pre>
<p>This is called extended chaining.</p>
<p>Some properties of the pipe syntax (<code>%&gt;%</code>) to keep in mind:</p>
<ul>
<li><p><code>%&gt;%</code> is never at the front of the line, it is always connecting one idea with the continuation of that idea on the next line.</p></li>
<li><p>The spot to the left of the first <code>%&gt;%</code> is always a data table.</p></li>
<li><p>The pipe syntax should be read as <em>then</em>, <code>%&gt;%</code>.</p></li>
</ul>
<p>Pipes are used commonly with functions in the <code>dplyr</code> package
(included in the <code>tidyverse</code> package) and they allow us to
sequentially build data wrangling operations.
Pipes are also helpful when creating data visualizations in the <code>ggplot2</code> package.</p>
</div>
<div id="a-data-wrangling-example" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> A data wrangling example<a class="anchor" aria-label="anchor" href="#a-data-wrangling-example"><i class="fas fa-link"></i></a>
</h2>
<p>Consider the built-in data set <code>hsb2</code> — the “High School and Beyond” survey.<br>
Two hundred observations were randomly sampled from the
“High School and Beyond” survey, a survey conducted on high
school seniors by the National Center of Education Statistics.
Of interest is the proportion of students at each of the
two types of school, <code>public</code> and <code>private</code>.</p>
<p>First, load the data into your R session:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">hsb2</span><span class="op">)</span> <span class="co"># Load the data</span></span></code></pre></div>
<p>We use the <code>table</code> command to tabulate how many of each type
of school are in the data set. Notice that the same result is
produced by the <code>$</code> command with <code>table</code> and the chaining
syntax done with <code>%&gt;%</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">hsb2</span><span class="op">$</span><span class="va">schtyp</span><span class="op">)</span> </span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  public private </span></span>
<span><span class="co">#&gt;     168      32</span></span></code></pre></div>
<p>is equivalent to</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hsb2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">schtyp</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># Select the schtyp variable</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; schtyp</span></span>
<span><span class="co">#&gt;  public private </span></span>
<span><span class="co">#&gt;     168      32</span></span></code></pre></div>
<p>In the code above, the <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function selected the <code>schtyp</code>
variable (column) from the <code>hsb2</code> data set.
Since data set is the first argument to the <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function
(examine the help file by typing <code><a href="https://dplyr.tidyverse.org/reference/select.html">?select</a></code>), we only need to
include the second argument to <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>—the variable we would
like to select.</p>
<div id="filtering" class="section level3 unnumbered">
<h3>Filtering<a class="anchor" aria-label="anchor" href="#filtering"><i class="fas fa-link"></i></a>
</h3>
<p>What if we are interested only in <code>public</code> schools?
First, we should take note of another piece of R syntax:
the double equal sign: <code>==</code>.
This is the logical test for “is equal to”.
In other words, we first determine if school type is equal
to public for each of the observations in the data set and
<code>filter</code> for those where this is true.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for public schools</span></span>
<span><span class="va">hsb2_public</span> <span class="op">&lt;-</span> <span class="va">hsb2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># Save final result as hsb2_public</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">schtyp</span> <span class="op">==</span> <span class="st">"public"</span><span class="op">)</span>  <span class="co"># Only include observations</span></span>
<span>                              <span class="co"># where the variable schtyp</span></span>
<span>                              <span class="co"># is equal to "public"</span></span></code></pre></div>
<p>We can read this as: “take the <code>hsb2</code> data frame and <code>pipe</code> it
into the <code>filter</code> function. Filter the data for
<code>cases where school type is equal to public</code>. Then,
<code>assign</code> the resulting data frame to a new object
called <code>hsb2 underscore public</code>.”</p>
</div>
<div id="mutating" class="section level3 unnumbered">
<h3>Mutating<a class="anchor" aria-label="anchor" href="#mutating"><i class="fas fa-link"></i></a>
</h3>
<p>Suppose we are not interested in the actual reading score
of students, but instead whether their reading score is below
average or at or above average.
First, we need to calculate the average reading score with
the <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> function.
This will give us the mean value, 52.23.
However, in order to be able to refer back to this value later on,
we might want to store it as an object that we can refer to by name.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate average reading score and show the value</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">hsb2</span><span class="op">$</span><span class="va">read</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 52.2</span></span></code></pre></div>
<p>So instead of just printing the result, let’s save it as
a new object called <code>avg_read</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate average reading score and store as avg_read</span></span>
<span><span class="va">avg_read</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">hsb2</span><span class="op">$</span><span class="va">read</span><span class="op">)</span></span></code></pre></div>
<p>Next we need to determine whether each student is below or at
or above average. For example, a reading score of 57 is above
average, so is 68, but 44 is below.
Obviously, going through each record like this would be tedious
and error prone.</p>
<p>Instead we can create this new variable with the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>
function from the <code>dplyr</code> package.</p>
<p>We start with the data frame, <code>hsb2</code>, and pipe it into
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, to create a new variable called <code>read_cat</code> (<code>cat</code> for <code>cat</code>egorical).
Note that we are using a new variable name here in order
to not overwrite the existing reading score variable.
The new variable <code>read_cat</code> will be a column in the
existing data frame <code>hsb2</code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hsb2</span> <span class="op">&lt;-</span> <span class="va">hsb2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>read_cat <span class="op">=</span> </span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">read</span> <span class="op">&lt;</span> <span class="va">avg_read</span>, </span>
<span>                                 <span class="st">"below average"</span>, </span>
<span>                                 <span class="st">"at or above average"</span></span>
<span>                                 <span class="op">)</span></span>
<span>                        <span class="op">)</span></span></code></pre></div>
<p>The decision criteria for this new variable is based on a
TRUE/FALSE question: if the reading score of the student
is below the average reading score, label “below average”,
otherwise, label “at or above average”.</p>
<p>This can be accomplished using the <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> function in R.
Look at its helpfile by typing <code><a href="https://rdrr.io/r/base/ifelse.html">?ifelse</a></code> into the R console window.</p>
<ul>
<li><p>The first argument of the function is the logical test.</p></li>
<li><p>The second argument is what to do if the result of the logical test is TRUE, in other words, if the student’s score is below the average score.</p></li>
<li><p>The last argument is what to do if the result is FALSE.</p></li>
</ul>
</div>
</div>
<div id="terms-2" class="section level2 unnumbered">
<h2>Terms<a class="anchor" aria-label="anchor" href="#terms-2"><i class="fas fa-link"></i></a>
</h2>
<p>We introduced the following terms in the chapter.
If you’re not sure what some of these terms mean, we recommend you go back in the text and review their definitions.
We are purposefully presenting them in alphabetical order, instead of in order of appearance, so they will be a little more challenging to locate.
However you should be able to easily spot them as <strong>bolded text</strong>.</p>
<div class="inline-table"><table class="table table-striped table-condensed" style="margin-left: auto; margin-right: auto;"><tbody>
<tr>
<td style="text-align:left;">
assignment
</td>
<td style="text-align:left;">
object
</td>
<td style="text-align:left;">
tidy data
</td>
</tr>
<tr>
<td style="text-align:left;">
function
</td>
<td style="text-align:left;">
pipe operator
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody></table></div>
</div>
<div id="r-functions" class="section level2 unnumbered">
<h2>R functions<a class="anchor" aria-label="anchor" href="#r-functions"><i class="fas fa-link"></i></a>
</h2>
<p>The following R functions were introduced in this chapter.</p>
<div class="inline-table"><table class="table table-striped table-condensed" style="margin-left: auto; margin-right: auto;"><tbody>
<tr>
<td style="text-align:left;">
%&gt;%
</td>
<td style="text-align:left;">
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>
</td>
<td style="text-align:left;">
<code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>[ , ]</code>
</td>
<td style="text-align:left;">
<code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code>
</td>
<td style="text-align:left;">
<code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>==</code>
</td>
<td style="text-align:left;">
<code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>
</td>
<td style="text-align:left;">
<code><a href="https://rdrr.io/r/base/table.html">table()</a></code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>$</code>
</td>
<td style="text-align:left;">
<code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code>
</td>
<td style="text-align:left;">
&lt;-
</td>
</tr>
<tr>
<td style="text-align:left;">
<code><a href="https://rdrr.io/r/utils/data.html">data()</a></code>
</td>
<td style="text-align:left;">
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody></table></div>
</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="data-design.html"><span class="header-section-number">2</span> Study design</a></div>
<div class="next"><a href="explore-categorical.html"><span class="header-section-number">4</span> Exploring categorical data</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-applications"><span class="header-section-number">3</span> Applications: Data</a></li>
<li><a class="nav-link" href="#dataframes-in-r"><span class="header-section-number">3.1</span> Dataframes in R</a></li>
<li><a class="nav-link" href="#datastruc"><span class="header-section-number">3.2</span> Tidy structure of data</a></li>
<li><a class="nav-link" href="#using-the-pipe-to-chain"><span class="header-section-number">3.3</span> Using the pipe to chain</a></li>
<li>
<a class="nav-link" href="#a-data-wrangling-example"><span class="header-section-number">3.4</span> A data wrangling example</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#filtering">Filtering</a></li>
<li><a class="nav-link" href="#mutating">Mutating</a></li>
</ul>
</li>
<li><a class="nav-link" href="#terms-2">Terms</a></li>
<li><a class="nav-link" href="#r-functions">R functions</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/MTstateIntroStats/IntroStatTextbook/blob/master/03-data-applications.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/MTstateIntroStats/IntroStatTextbook/edit/master/03-data-applications.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Montana State Introductory Statistics with R</strong>" was written by Nicole Carnegie, Stacey Hancock, Elijah Meyer, Jade Schmidt, Melinda Yager. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
